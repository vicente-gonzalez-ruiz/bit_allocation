% Emacs, this is -*-latex-*-

\title{\href{https://github.com/vicente-gonzalez-ruiz/bit_allocation}{Bit Allocation}}

\author{Vicente Gonz√°lez Ruiz}

\maketitle

\section{About the problem}
Assuming that a source of information produces a sequence of pieces of
information (for example, samples), the bit allocation is the process
that:
\begin{itemize}
\item Given an average distortion\footnote{By definition, distortion
  cannot be negative.} $R$ (that can be 0), determines the minimum
  number of total bits $R$ (possiblely generated by a data
  compressor), by controlling the quantization level applied to each
  piece, that allows to represent the output of the source.
\item Given a number of total bits $R$ (possiblely generated by a data
  compressor), determines the \mylink{quantization}{quantization}
  level of each piece that allows to minimize the distortion $D$. This
  problem is more common that the previous one, and for this reason,
  we restrict our attention only on it.
\item We will assume that
  \begin{equation}
    R=\sum_i R_i
  \end{equation}
  where $R_i$ is the length (usually in bits) of the representation of
  the $i$-th piece of information.
\item Bit allocation depends on if the pieces are indedepent
  (uncorrelated) or not.
\end{itemize}

\section{The R/D (Rate/Distortion) curve}
\begin{itemize}
\item 
  Each piece of information, when quantized and represented, can be
  characterized by its R/D curve. This curve is the collection of
  points $(r_k,d_k)$, where $k$ refeers to the quantization levels
  applied to the piece, $r_k$ is the length of the corresponding
  representation, and $d_k$ the distortion introduced by the quantizer
  for such quantization level.
\item
  For example, if the MSE is used as
  \mylink{distortion_metrics}{distortion metric}, the R/D curve is
  usually convex, similar to:
\begin{verbatim}
    MSE
     |*
     | *
     |  *
     |    *
     |        *
     |                 *
     |                                 *
     |                                                       *
     +--------------------------------------------------------- (bit-)Rate
     <- larger quantization step   smaller quantization step ->
\end{verbatim}
\end{itemize}

\section{Allocation of uncorrelated sources}
\begin{itemize}

\item
  If the pieces are uncorrelated, it holds that
  \begin{equation}
    D=\sum_i D_i
  \end{equation}
  where $D_i$ is the distortion produced by the quantization of the
  $i$-th piece of information.

\item
  Lets assume that the R/D curve of each $i$-th piece is known. The
  problem of determining the quantization level of the pieces can be
  expressed as a collection of Lagrangians
  \begin{equation}
    \sum_i L_i = \sum_i D_i + \lambda\sum_i R_i.
  \end{equation}
  Taking the derivative and equaling to $0$ to find the rates that minimizes the distortion,
  \begin{equation*}
    \frac{\partial L_i}{\partial R_i} = \frac{\partial D_i}{\partial R_i} + \lambda = 0,
  \end{equation*}
  and therefore, the slope of the R/D curve must be
  \begin{equation}
    \frac{\partial D_i}{\partial R_i} = -\lambda.
  \end{equation}

\item 
  Thus, for the solution to be optimal, the $\{R_i\}$ must correspond
  to constant slope points of their respective R/D
  curves~\cite{vetterli1995wavelets}.

\end{itemize}
  
  
\section{Allocation of correlated sources}
A source of information that generates pieces of information that are
correlated can be allocated, basically, using 2 different techniques:
\begin{enumerate}
\item Using \mylink{vector_quantization}{vector quantization}.
\item Using \mylink{transform_coding}{transform coding} and, supposing
  that the transform coefficients are uncorrelated, using a bit
  allocation algorithm for uncorrelated sources.
\end{enumerate}


\bibliography{quantization,DWT,data-compression}
