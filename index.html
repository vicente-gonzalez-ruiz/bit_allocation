<!DOCTYPE html> 
<html> 
<head> <title>Bit Allocation</title> 
<meta charset="UTF-8" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<link rel="stylesheet" type="text/css" href="index.css" /> 
<script type="text/javascript" 
src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" 
></script> 
<style type="text/css"> 
.MathJax_MathML {text-indent: 0;} 
</style> 
</head><body 
>
   <div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead"><a 
href="https://github.com/vicente-gonzalez-ruiz/bit_allocation" >Bit Allocation</a></h2>
 <div class="author" ><span 
class="ecrm-1200">Vicente Gonz</span><span 
class="ecrm-1200">á</span><span 
class="ecrm-1200">lez Ruiz</span></div><br />
<div class="date" ><span 
class="ecrm-1200">January 31, 2020</span></div>
   </div>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-10001"></a>About the problem</h3>
<!--l. 10--><p class="noindent" >Assuming that a source of information produces a sequence of pieces of
information (for example, samples), the bit allocation is the process that:
</p>
     <ul class="itemize1">
     <li class="itemize">Given an average distortion<span class="footnote-mark"><a 
href="index2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-1001f1"></a> 
     <!--l. 15--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>R</mi></math>
     (that can be 0), determines the minimum number of total bits <!--l. 16--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>R</mi></math>
     (possiblely generated by a data compressor), by controlling the quantization
     level applied to each piece, that allows to represent the output of the
     source.
     </li>
     <li class="itemize">Given a number of total bits <!--l. 19--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>R</mi></math>
     (possiblely generated by a data compressor), determines the <a 
href="https://vicente-gonzalez-ruiz.github.io/quantization/" >quantization</a>
     level of each piece that allows to minimize the distortion <!--l. 21--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>D</mi></math>.
     This problem is more common that the previous one, and for this reason,
     we restrict our attention only on it.
     </li>
     <li class="itemize">We will assume that <table class="equation"><tr><td> <a 
 id="x1-1002r1"></a>
                                                                  

                                                                  
     <!--l. 25--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                            <mi 
>R</mi> <mo 
class="MathClass-rel">=</mo><munder class="msub"><mrow 
><mo mathsize="big" 
> ∑</mo>
   </mrow><mrow 
><mi 
>i</mi></mrow></munder 
><msub><mrow 
><mi 
>R</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
>
</math></td><td class="eq-no">(1)</td></tr></table>
     <!--l. 28--><p class="noindent" >where <!--l. 28--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>R</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>
     is the length (usually in bits) of the representation of the
     <!--l. 29--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>i</mi></math>-th
     piece of information.
     </p></li>
     <li class="itemize">Bit allocation depends on if the pieces are indedepent (uncorrelated) or
     not.</li></ul>
<!--l. 34--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-20002"></a>The R/D (Rate/Distortion) curve</h3>
     <ul class="itemize1">
     <li class="itemize">Each piece of information, when quantized and represented, can be characterized
     by its R/D curve. This curve is the collection of points <!--l. 39--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mrow ><mo 
class="MathClass-open">(</mo><mrow><msub><mrow 
><mi 
>r</mi></mrow><mrow 
><mi 
>k</mi></mrow></msub 
><mo 
class="MathClass-punc">,</mo><msub><mrow 
><mi 
>d</mi></mrow><mrow 
><mi 
>k</mi></mrow></msub 
></mrow><mo 
class="MathClass-close">)</mo></mrow></math>,
     where <!--l. 39--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>k</mi></math>
     refeers to the quantization levels applied to the piece, <!--l. 40--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>r</mi></mrow><mrow 
><mi 
>k</mi></mrow></msub 
></math>
     is the length of the corresponding representation, and <!--l. 41--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>d</mi></mrow><mrow 
><mi 
>k</mi></mrow></msub 
></math>
     the distortion introduced by the quantizer for such quantization level.
     </li>
     <li class="itemize">For example, if the MSE is used as <a 
href="https://vicente-gonzalez-ruiz.github.io/distortion_metrics/" >distortion metric</a>, the R/D curve is usually
     convex, similar to:
                                                                  

                                                                  
     <div class="verbatim" id="verbatim-1">
         MSE
      <br />     |*
      <br />     | *
      <br />     |  *
      <br />     |    *
      <br />     |        *
      <br />     |                 *
      <br />     |                                 *
      <br />     |                                                       *
      <br />     +--------------------------------------------------------- (bit-)Rate
      <br />     &#x003C;- larger quantization step   smaller quantization step -&#x003E;
</div>
     <!--l. 59--><p class="nopar" ></p></li></ul>
<!--l. 62--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-30003"></a>Allocation of uncorrelated sources</h3>
     <ul class="itemize1">
     <li class="itemize">If the pieces are uncorrelated, it holds that <table class="equation"><tr><td> <a 
 id="x1-3001r2"></a>
     <!--l. 67--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                            <mi 
>D</mi> <mo 
class="MathClass-rel">=</mo><munder class="msub"><mrow 
><mo mathsize="big" 
> ∑</mo>
   </mrow><mrow 
><mi 
>i</mi></mrow></munder 
><msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
>
</math></td><td class="eq-no">(2)</td></tr></table>
     <!--l. 70--><p class="noindent" >where <!--l. 70--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>
     is the distortion produced by the quantization of the
     <!--l. 71--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>i</mi></math>-th
     piece of information.
                                                                  

                                                                  
     </p></li>
     <li class="itemize">Lets assume that the R/D curve of each
     <!--l. 74--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>i</mi></math>-th piece
     is known. The problem of determining the quantization level of the pieces, given a bit
     budget <!--l. 76--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>R</mi></math>,
     can be expressed as minimizing the <a 
href="https://en.wikipedia.org/wiki/Lagrange_multiplier" >Lagrangian</a> <table class="equation"><tr><td> <a 
 id="x1-3002r3"></a>
     <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                           <mi 
>L</mi> <mo 
class="MathClass-rel">=</mo> <mi 
>D</mi> <mo 
class="MathClass-bin">+</mo> <mi 
>λ</mi><mi 
>R</mi><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">(3)</td></tr></table>
     <!--l. 81--><p class="noindent" >Because both, the rate and the distortion are additive, the previous equation
     can be written as </p><table class="equation"><tr><td> <a 
 id="x1-3003r4"></a>
     <!--l. 83--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                 <munder class="msub"><mrow 
><mo mathsize="big" 
>∑</mo>
  </mrow><mrow 
><mi 
>i</mi></mrow></munder 
><msub><mrow 
><mi 
>L</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-rel">=</mo><munder class="msub"><mrow 
><mo mathsize="big" 
> ∑</mo>
   </mrow><mrow 
><mi 
>i</mi></mrow></munder 
><msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-bin">+</mo> <mi 
>λ</mi><munder class="msub"><mrow 
><mo mathsize="big" 
>∑</mo>
   </mrow><mrow 
><mi 
>i</mi></mrow></munder 
><msub><mrow 
><mi 
>R</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">(4)</td></tr></table>
     <!--l. 86--><p class="noindent" >Taking the derivative with respect to the rate, and equaling to
     <!--l. 86--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn></math>
     to ﬁnd the rates that minimizes the distortion, we get that </p><table class="equation-star"><tr><td>
                                                                  

                                                                  
     <!--l. 88--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                      <mfrac><mrow 
><mi 
>∂</mi><msub><mrow 
><mi 
>L</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow> 
<mrow 
><mi 
>∂</mi><msub><mrow 
><mi 
>R</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow></mfrac> <mo 
class="MathClass-rel">=</mo> <mfrac><mrow 
><mi 
>∂</mi><msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow> 
<mrow 
><mi 
>∂</mi><msub><mrow 
><mi 
>R</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow></mfrac> <mo 
class="MathClass-bin">+</mo> <mi 
>λ</mi> <mo 
class="MathClass-rel">=</mo> <mn>0</mn><mo 
class="MathClass-punc">,</mo>
</math></td></tr></table>
     <!--l. 91--><p class="noindent" >and therefore, the slope of the R/D curve must be </p><table class="equation"><tr><td> <a 
 id="x1-3004r5"></a>
     <!--l. 92--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                                             <mfrac><mrow 
><mi 
>∂</mi><msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow> 
<mrow 
><mi 
>∂</mi><msub><mrow 
><mi 
>R</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow></mfrac> <mo 
class="MathClass-rel">=</mo> <mo 
class="MathClass-bin">−</mo><mi 
>λ</mi><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">(5)</td></tr></table>
     </li>
     <li class="itemize">Thus, for the solution to be optimal, the
     <!--l. 97--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mrow ><mo 
class="MathClass-open">{</mo><mrow><msub><mrow 
><mi 
>R</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></mrow><mo 
class="MathClass-close">}</mo></mrow></math>
     must correspond to constant slope points of their respective R/D curves <span class="cite">[<a 
href="#Xvetterli1995wavelets">1</a>]</span>.
     </li></ul>
<!--l. 104--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-40004"></a>Allocation of correlated sources</h3>
<!--l. 105--><p class="noindent" >A source of information that generates pieces of information that are correlated can
be allocated, basically, using 2 diﬀerent techniques:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-4002x1">Using <a 
href="https://vicente-gonzalez-ruiz.github.io/vector_quantization/" >vector quantization</a>.
     </li>
     <li 
  class="enumerate" id="x1-4004x2">Using <a 
href="https://vicente-gonzalez-ruiz.github.io/transform_coding/" >transform coding</a> and, supposing that the transform coeﬃcients are
     uncorrelated, using a bit allocation algorithm for uncorrelated sources.</li></ol>
                                                                  

                                                                  
<!--l. 1--><p class="noindent" >
</p>
   <h3 class="likesectionHead"><a 
 id="x1-50004"></a>References</h3>
<!--l. 1--><p class="noindent" >
   </p><div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 [1]<span class="bibsp">   </span></span><a 
 id="Xvetterli1995wavelets"></a>Martin Vetterli and Jelena Kovacevic.  <a 
href="http://waveletsandsubbandcoding.org/Repository/VetterliKovacevic95_Manuscript.pdf" ><span 
class="ecti-1000">Wavelets and Subband Coding</span></a>.
   Prentice-hall, 1995.
</p>
   </div>
<a 
 id="Q1-1-6"></a>
    
</body> 
</html>
                                                                  


